"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[554],{28658:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return s},default:function(){return c}});var i=n(87462),r=n(63366),o=(n(15007),n(64983)),a=n(91515),d=["components"],s={},h={_frontmatter:s},l=a.Z;function c(e){var t=e.components,n=(0,r.Z)(e,d);return(0,o.mdx)(l,(0,i.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,o.mdx)("h1",{id:"authorization"},"Authorization"),(0,o.mdx)("p",null,"This SDK follows the Proof Key for Code Exchange (PKCE) OAuth flow.  Developers are responsible for ",(0,o.mdx)("strong",{parentName:"p"},"registering OAuth credentials")," in Developer Console and implementing the ",(0,o.mdx)("strong",{parentName:"p"},"code exchange")," portion of the flow. "),(0,o.mdx)("h2",{id:"redirect"},"Redirect"),(0,o.mdx)("p",null,"When the SDK is first called, the user is prompted to sign-in to their Adobe account. The IMS library (",(0,o.mdx)("inlineCode",{parentName:"p"},"imslib-thin_node_module.js"),") helps handle signing users in and out of their Adobe accounts. It will be bundled with the SDK once it is hosted on a CDN. "),(0,o.mdx)("p",null,"Here are the OAuth steps it handles on the backend:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"A unique ",(0,o.mdx)("inlineCode",{parentName:"li"},"code_verifier")," is created (then saved to the browser's session storage) and used by the IMS library to generates a ",(0,o.mdx)("inlineCode",{parentName:"li"},"code_challenge"),". "),(0,o.mdx)("li",{parentName:"ul"},"The IMS library makes a GET request to the IMS authorization endpoint with this ",(0,o.mdx)("inlineCode",{parentName:"li"},"code_challenge"),"."),(0,o.mdx)("li",{parentName:"ul"},"The client is identified, and the user is prompted to authenticate.\nIf the user accepts, the pop-up window closes and the IMS server ",(0,o.mdx)("strong",{parentName:"li"},"redirects")," the user back to registered redirect URI with an authorization code")),(0,o.mdx)("h3",{id:"register-oauth-credentials"},"Register OAuth Credentials"),(0,o.mdx)("p",null,"OAuth credentials are required when first creating an integration, but they can be modified later. In ",(0,o.mdx)("a",{parentName:"p",href:"https://developer.adobe.com/console"},"Developer Console"),', navigate to the project you created. You can edit credentials by navigating to "Credentials" > "OAuth Single-Page App". '),(0,o.mdx)("p",null,'The redirect URL(s) you define here must correspond with the URL(s) to which the IMS server will redirect after authorization has been granted by the user. IMS will check the "Redirect URI Patterns" field first. If there are no matches, it will default to the "Default Redirect URI". '),(0,o.mdx)("p",null,"If you'd like to test the ",(0,o.mdx)("a",{parentName:"p",href:"https://github.com/AdobeDocs/cc-everywhere/tree/main/sample"},"sample"),", specify: "),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("a",{parentName:"li",href:"https://127.0.0.1:8000/redirect.html"},"https://127.0.0.1:8000/redirect.html"),' in the "Default Redirect URI" field'),(0,o.mdx)("li",{parentName:"ul"},'https://localhost:8000/redirect.html in the "Redirect URI Patterns" field')),(0,o.mdx)("p",null,"Integrations must be submitted with https redirect URIs to be approved for production, but http URIs are accepted ",(0,o.mdx)("strong",{parentName:"p"},"only"),' for testing localhost instances. Note that the "Default Redirect URI" field will still expect a https pattern in Console, but including the http URI in the "Redirect URI Patterns" field will be sufficient. '),(0,o.mdx)("h2",{id:"code-exchange"},"Code Exchange"),(0,o.mdx)("p",null,"Call the ",(0,o.mdx)("inlineCode",{parentName:"p"},"exchangeAuthCodeForToken()")," method at your redirect URI to exchange the authorization code for an access token, so the user is not prompted to login again in this session."),(0,o.mdx)("h3",{id:"exchangeauthcodefortoken"},"exchangeAuthCodeForToken()"),(0,o.mdx)("p",null,"This SDK provides this method to send the ",(0,o.mdx)("inlineCode",{parentName:"p"},"code")," and the ",(0,o.mdx)("inlineCode",{parentName:"p"},"code_verifier")," to the IMS server. ",(0,o.mdx)("strong",{parentName:"p"},"If verified"),", the IMS server responds with an access token and it is stored in session storage for future API calls. "),(0,o.mdx)("p",null,"This flow is secure because even if the authorization code is somehow intercepted, it cannot be exchanged for an access token without the verifier. For the sample we provide, you can see that the ",(0,o.mdx)("inlineCode",{parentName:"p"},"redirect.html")," page initializes the SDK and calls this method"))}c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-reference-authorization-index-md-fb91126067719cdec6c0.js.map